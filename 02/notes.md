Конспект лекции
====

Неиницилизованные данные в C
---

- static, global, inline неициализированные переменные инициализуруются в блоке bss оперативной памяти, который заполнен **нулями**
- все остальные неинициализированные переменные иницилизируются в стеке оперативной памяти

Стэк и куча
---

- **Стэк** идет вниз
- **Куча** идет вверх

Mmap
----

- Отображает файл полностью на оперативную память в "Mapped Memory" оперативной памяти
- Он удобный
- Он **небыстрее** open, write

Идентификатор
---

- Эффективный идентификатор пользователя показывает от чьего лица запущен процесс
- Реальный идентификатор пользователя показывает кто создал процесс
- Сохраненный индентификатор пользователя

Fork
---

- форк, не exec, он неперевыполняет процесс
- форк выполняет выполнение процесса с той точки, где мы остановились
- exec стартует новую программу, которая грузит с "main"
- непонятно кто стартует первым: родитель и ребенок

Times
---

- функция, которая даст время выполнение программы по настенным часам
- большое user_time, то программа повисла в бесконечном цике или научные вычисления
- большое system_time, то программа повисла в sys_call, например записываем по одну байт каждый раз, когда было бы удобнее буферизировать данные по 4kB и затем писать в файл

Смена идентификатора
---

- Нерут может менять эффективный на сохраненный

System
---

- запускает процесс шела

Сессия/Группа
---

- Лидер группы, не может создать сессию
- Создатель сессии становится лидером сессии и неявно создает группу
- Сессия имеет только один управляющий терминал
- Все группы сессии получают один и тот же сигнал
- Если лидер группы умирает, то группа не умирает

Сигналы
---

- kill посылает сигнал, а не убивает процесс
- у каждого сигнала есть станадратное поведение (обработка)
- sigkill (9) его нельзя проигнорировать и на неё нельзя повесить обработчик
- "d" - interruptable sleep. Такой процесс нельзя убить 9-кой (из-за целостности данных при работе с диском)
- Сигналы можно посылать не всем
- Сигналы маскируются, если мне сейчас не хочется обрабатывать сигналы. Маскирование позволяет откладывать сигналы в очередь (маска) (в оперативную память)
- Информация о сигналах хранится в ядре
- epipe by default killing self-process

**Взаимодействие между процесссами (IPC)**
---

Неименнованный процесс
---

- пример взаимодействия (неименнованного канала) - pip
- полудуплексный канал
- никак не прокинуть в другой процесс
- все что пишет родитель, прилетает в дочерний процесс

Именнованный процесс
---

- пример использования fifo

----

***Заметки по слайдам***
---

- [*слайд с mmap*]: такое расстановка памяти справедлива в смысле вирутальной памяти для каждой программы
- Block Size и размер страницы - это разные вещи. bs отвечает за количество i/o за одну итерацию и может быть переопределен, размер страницы отвечает за количество байт, которое может быть записано за одну итерацию и не может быть переопределен. Page size by default = 4k. Also it means that if you want to write in file 1 byte, proccessor will manage with this operation as 4k byte write operation
- Если что-то идет не так с программой (смотреть по system_time, user_time), то нужно смотреть по strace
- Группа процессов. Группа, которые получает один и тот же сигнал, например Ctrl+C в python
- Сессия - это группа групп
- Демон - процесс без управляющего терминала (фоновый процесс). Он только пишет свои логи
- Зомби - процесс под wait() ?
- errno - variable errno, which
       is set by system calls and some library functions in the event of an
       error to indicate what went wrong
- mutex - это обратный семафор. mutex инт от 0 до max. Означает сколько единиц ресурса есть. Например, 5 пользователей, а максимум может быть 25
- семафора означает сколько ресурсов осталось для данного процесса
- можно посмотреть таблицы семафоров с помощью команды bash:

```bash
$ ipcs
```

----

***Ключевые слова***
---

- mmap
- кадр стэка
- зомби
- идентификатор пользователя
- fork()
- work()
- coredump
- timeout
- pause